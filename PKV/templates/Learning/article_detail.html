{% extends "base.html" %}
{% load static %}

{% block title %}{{ article.title }} - ShieldCall VN{% endblock %}

{% block meta_description %}{{ article.content|striptags|truncatechars:160 }}{% endblock %}

{% block og_title %}{{ article.title }}{% endblock %}
{% block og_description %}{{ article.content|striptags|truncatechars:200 }}{% endblock %}
{% block og_type %}article{% endblock %}
{% block og_image %}{% if article.cover_image %}{{ article.cover_image.url }}{% else %}{% static 'logo.png' %}{% endif %}{% endblock %}

{% block content %}
<div class="animate-fadein max-w-4xl mx-auto space-y-8 py-10">
    <!-- Breadcrumbs -->
    <nav class="flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-white/20">
        <a href="/" class="hover:text-cyan-400 transition-colors">Trang chủ</a>
        <i class="bi bi-chevron-right text-[8px]"></i>
        <a href="/learn/" class="hover:text-cyan-400 transition-colors">Kiến thức</a>
        <i class="bi bi-chevron-right text-[8px]"></i>
        <span class="text-white/40">{{ article.title|truncatechars:30 }}</span>
    </nav>

    <!-- Article Header -->
    <div class="space-y-6">
        <div class="flex items-center gap-4">
            <span class="px-3 py-1 rounded-full bg-cyan-500/10 text-cyan-400 text-[10px] font-black uppercase tracking-widest">
                {{ article.get_category_display }}
            </span>
            <span class="text-[10px] font-bold text-white/20 uppercase tracking-widest">{{ article.created_at|date:"d/m/Y" }}</span>
        </div>
        
        <h1 class="text-4xl sm:text-5xl font-black text-white tracking-tight leading-tight">
            {{ article.title }}
        </h1>

        <div class="flex items-center gap-4 py-6 border-y border-white/5">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-cyan-500 to-purple-500 flex items-center justify-center text-black font-black text-xs shadow-lg shadow-cyan-500/20">
                {% if article.author %}
                    {{ article.author.username|default:"A"|first|upper }}
                {% else %}
                    A
                {% endif %}
            </div>
            <div>
                <div class="text-[11px] font-black text-white uppercase tracking-widest">
                    {% if article.author %}
                        {{ article.author.get_full_name|default:article.author.username }}
                    {% else %}
                        Admin
                    {% endif %}
                </div>
                <div class="text-[9px] font-bold text-white/20 uppercase tracking-widest mt-0.5">Ban biên tập ShieldCall VN</div>
            </div>
        </div>
    </div>

    <!-- Featured Image -->
    {% if article.cover_image %}
    <div class="aspect-[21/9] rounded-[2.5rem] overflow-hidden bg-white/5 border border-white/10 shadow-2xl">
        <img src="{{ article.cover_image.url }}" class="w-full h-full object-cover">
    </div>
    {% endif %}

    <!-- Article Content -->
    <div class="prose prose-invert prose-cyan max-w-none text-white/70 leading-relaxed font-medium text-base sm:text-lg selection:bg-cyan-500/20">
        {{ article.content|safe }}
    </div>

    <!-- Footer / Share -->
    <div class="pt-10 border-t border-white/5 flex flex-col sm:flex-row justify-between items-center gap-6">
        <div class="flex items-center gap-4">
            <span class="text-[10px] font-black text-white/20 uppercase tracking-widest">Chia sẻ bài viết</span>
            <div class="flex gap-2">
                <a href="#" class="w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all border border-white/5">
                    <i class="bi bi-facebook text-sm"></i>
                </a>
                <a href="#" class="w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all border border-white/5">
                    <i class="bi bi-twitter-x text-sm"></i>
                </a>
                <a href="#" class="w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all border border-white/5">
                    <i class="bi bi-link-45deg text-lg"></i>
                </a>
            </div>
        </div>
        
        <a href="/learn/" class="flex items-center gap-2 bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-cyan-500/20 transition-all">
            <i class="bi bi-arrow-left"></i> Quay lại cẩm nang
        </a>
    </div>
</div>

<!-- Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "headline": "{{ article.title|escapejs }}",
  "image": [
    "{% if article.cover_image %}{{ request.scheme }}://{{ request.get_host }}{{ article.cover_image.url }}{% else %}{{ request.scheme }}://{{ request.get_host }}{% static 'logo.png' %}{% endif %}"
  ],
  "datePublished": "{{ article.created_at|date:'c' }}",
  "dateModified": "{{ article.updated_at|date:'c' }}",
  "author": [{
      "@type": "Person",
      "name": "{{ article.author.username|default:'Admin'|escapejs }}",
      "url": "{{ request.scheme }}://{{ request.get_host }}/learn/"
    }]
}
</script>
{% endblock %}
